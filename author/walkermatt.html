<!DOCTYPE html>
<html lang="en">
<head>
        <title>longwayaround.org.uk - walkermatt</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, target-densitydpi=device-dpi">
        <link rel="stylesheet" href="https://longwayaround.org.uk/theme/css/main.css" type="text/css" />
        <link href="https://longwayaround.org.uk/feeds/all.rss.xml" type="application/atom+xml" rel="alternate" title="longwayaround.org.uk RSS Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://longwayaround.org.uk/css/ie.css"/>
                <script src="https://longwayaround.org.uk/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://longwayaround.org.uk/css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">longwayaround.org.uk  <strong>taking the scenic route and enjoying the journey</strong></a></h1>
                <nav>
                <ul>
                    <li ><a href="https://longwayaround.org.uk/notes/">notes</a></li>
                </ul>
                </nav>
                    <ul class="social">
                        <li><a href="https://longwayaround.org.uk/feeds/all.rss.xml" rel="alternate"><img src="https://longwayaround.org.uk/theme/images/icons/gosquared/18/rss.png" title="rss" width="18" height="18" /></a></li>
                    <li><a href="https://uk.linkedin.com/in/walkermatt"><img src="https://longwayaround.org.uk/theme/images/icons/gosquared/18/linkedin.png" title="linkedin" width="18" height="18" /></a></li>
                    <li><a href="https://github.com/organizations/AstunTechnology"><img src="https://longwayaround.org.uk/theme/images/icons/gosquared/18/github.png" title="github" width="18" height="18" /></a></li>
                    <li><a href="https://github.com/walkermatt"><img src="https://longwayaround.org.uk/theme/images/icons/gosquared/18/github.png" title="github" width="18" height="18" /></a></li>
                    <li><a href="https://twitter.com/_walkermatt"><img src="https://longwayaround.org.uk/theme/images/icons/gosquared/18/twitter.png" title="twitter" width="18" height="18" /></a></li>
                    </ul>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <abbr class="published" title="2022-06-22T21:56:00+01:00">Wed 22 June 2022</abbr>
                    <h1 class="entry-title"><a href="https://longwayaround.org.uk/notes/writing-small-text-filters-for-the-shell-and-vim/">Writing small text filters for the shell and Vim</a></h1> 
                    <p>Text filters are command-line programs that take text as input, transform it then output the results. An example of a common built in text filter is <tt class="docutils literal">sort</tt> which when passed newline separated text will sort each line:</p>
<div class="highlight"><pre><span></span><span class="nb">printf</span> <span class="s1">&#39;b\nc\na&#39;</span> <span class="p">|</span> sort
</pre></div>
<p>You can write your own text filter scripts; this is an example from my <tt class="docutils literal">`.bin</tt> directory which can be used to filter JSON text. It supports pretty printing the output as well as removing any formatting so that the JSON text is all on one line.</p>
<p><tt class="docutils literal">jsonformat</tt></p>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">optparse</span> <span class="kn">import</span> <span class="n">OptionParser</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>

    <span class="n">parser</span> <span class="o">=</span> <span class="n">OptionParser</span><span class="p">()</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s1">&#39;-i&#39;</span><span class="p">,</span> <span class="s1">&#39;--indent&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;indent&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;int&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s1">&#39;-s&#39;</span><span class="p">,</span> <span class="s1">&#39;--squash&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;squash&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
    <span class="n">options</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">infile</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span>
        <span class="n">outfile</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">infile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span>
        <span class="n">outfile</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">infile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span>
        <span class="n">outfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">SystemExit</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; [infile [outfile]]&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">infile</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">SystemExit</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">options</span><span class="o">.</span><span class="n">squash</span><span class="p">:</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">outfile</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="n">options</span><span class="o">.</span><span class="n">indent</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;: &#39;</span><span class="p">))</span>
    <span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="n">main</span><span class="p">()</span>
</pre></div>
<p>The Python script makes use of the Python 3 <tt class="docutils literal">json</tt> package for reading and writing JSON and supports reading from standard input (<tt class="docutils literal">stdin</tt>) or a file and writing to standard out (<tt class="docutils literal">stdout</tt>) or file.</p>
<p>Assuming a file called <tt class="docutils literal">feature.json</tt> it can be pretty printed with an indentation of <tt class="docutils literal">2</tt> spaces to <tt class="docutils literal">stdout</tt> like so:</p>
<div class="highlight"><pre><span></span>jsonformat --indent <span class="m">2</span> features.json
</pre></div>
<div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;features&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;geometry&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">[</span>
            <span class="p">[</span>
              <span class="mf">-2.407379150390625</span><span class="p">,</span>
              <span class="mf">52.36302183361385</span>
            <span class="p">],</span>
            <span class="p">[</span>
              <span class="mf">-2.3258399963378906</span><span class="p">,</span>
              <span class="mf">52.36302183361385</span>
            <span class="p">],</span>
            <span class="p">[</span>
              <span class="mf">-2.3258399963378906</span><span class="p">,</span>
              <span class="mf">52.41488029514571</span>
            <span class="p">],</span>
            <span class="p">[</span>
              <span class="mf">-2.407379150390625</span><span class="p">,</span>
              <span class="mf">52.41488029514571</span>
            <span class="p">],</span>
            <span class="p">[</span>
              <span class="mf">-2.407379150390625</span><span class="p">,</span>
              <span class="mf">52.36302183361385</span>
            <span class="p">]</span>
          <span class="p">]</span>
        <span class="p">],</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Polygon&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Wyre Forest&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span>
<span class="p">}</span>
</pre></div>
<p>Or output with formatting removed:</p>
<div class="highlight"><pre><span></span>jsonformat --squash features.json
</pre></div>
<div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;features&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="nt">&quot;geometry&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[[[</span><span class="mf">-2.407379150390625</span><span class="p">,</span> <span class="mf">52.36302183361385</span><span class="p">],</span> <span class="p">[</span><span class="mf">-2.3258399963378906</span><span class="p">,</span> <span class="mf">52.36302183361385</span><span class="p">],</span> <span class="p">[</span><span class="mf">-2.3258399963378906</span><span class="p">,</span> <span class="mf">52.41488029514571</span><span class="p">],</span> <span class="p">[</span><span class="mf">-2.407379150390625</span><span class="p">,</span> <span class="mf">52.41488029514571</span><span class="p">],</span> <span class="p">[</span><span class="mf">-2.407379150390625</span><span class="p">,</span> <span class="mf">52.36302183361385</span><span class="p">]]],</span> <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Polygon&quot;</span><span class="p">},</span> <span class="nt">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Wyre Forest&quot;</span><span class="p">},</span> <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">}],</span> <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">}</span>
</pre></div>
<div class="section" id="use-in-vim">
<h2>Use in Vim</h2>
<p>Assuming the script is in your system path it can then be used from within Vim to filter text within a buffer.</p>
<div class="section" id="format-program-formatprg">
<h3>Format program (<tt class="docutils literal">formatprg</tt>)</h3>
<p>Add the following to your <tt class="docutils literal">.vimrc</tt> to set <tt class="docutils literal">jsonformat</tt> as the <a class="reference external" href="https://vimhelp.org/options.txt.html#%27formatprg%27">format program</a> for JSON files:</p>
<div class="highlight"><pre><span></span><span class="k">au</span> <span class="nb">FileType</span> json <span class="k">setlocal</span> <span class="nb">formatprg</span><span class="p">=</span>jsonformat
</pre></div>
<p>When you have a buffer with a file type of JSON open you can then use <tt class="docutils literal">gq</tt> followed by a motion to invoke the format program. You can also select lines in visual mode and use <tt class="docutils literal">gq</tt> to format just those lines.</p>
</div>
<div class="section" id="execute-shell-command">
<h3>Execute shell command (<tt class="docutils literal">:!</tt>)</h3>
<p>It's also possible to select lines in visual mode then call <tt class="docutils literal">jsonformat</tt> <a class="reference external" href="https://vimhelp.org/various.txt.html#%3A%21">via the command-line mode</a> (the <tt class="docutils literal"><span class="pre">'&lt;,'&gt;</span></tt> are inserted for you and represent the range of the currently selected lines):</p>
<div class="highlight"><pre><span></span><span class="p">:</span><span class="s1">&#39;&lt;,&#39;</span><span class="p">&gt;!</span>jsonformat <span class="p">--</span>squash
</pre></div>
<p>This approach has the advantage of allowing options to be specified such as <tt class="docutils literal"><span class="pre">--squash</span></tt> in the above example.</p>
</div>
</div>

<footer class="post-info">
    <abbr class="published" title="2022-06-22T21:56:00+01:00">Wed 22 June 2022</abbr>
<p>Tags: <a href="https://longwayaround.org.uk/tag/vim.html">vim</a> <a href="https://longwayaround.org.uk/tag/bash.html">bash</a> <a href="https://longwayaround.org.uk/tag/sh.html">sh</a> <a href="https://longwayaround.org.uk/tag/python.html">python</a> </p></footer><!-- /.post-info -->                    <p><a href="https://longwayaround.org.uk/notes/writing-small-text-filters-for-the-shell-and-vim/#disqus_thread">comments</a>.</p>
                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other posts</h1>
                    <hr />
                        <ol id="posts-list" class="hfeed">

 
            <li><article class="hentry">
                <header>
                        <abbr class="published" title="2019-09-20T12:00:00+01:00">Fri 20 September 2019</abbr>
                        <h1><a href="https://longwayaround.org.uk/notes/mapserver-postgis-performance/" rel="bookmark" title="Permalink to MapServer PostGIS Performance">MapServer PostGIS Performance</a></h1>
                </header>
                <div class="entry-content">
                <div class="slug">
                    <p>Recently I was looking at improving the performance of rendering a <a class="reference external" href="https://github.com/spacesyntax/OpenMapping">Space Syntax OpenMapping</a> layer in MapServer. The <code>openmapping_gb_v1</code> table is in a PostGIS database with an index on the geometry column. The original MapServer <code>DATA</code> configuration looked like this:</p>
<div class="highlight"><pre><span></span>DATA &quot;wkb_geometry from (select meridian_class_scale * 10 as line_width, * from openmapping …</pre></div>
                    <p>
<a href="https://longwayaround.org.uk/notes/mapserver-postgis-performance/#disqus_thread">comments</a>.                        <a class="readmore" href="https://longwayaround.org.uk/notes/mapserver-postgis-performance/">read more</a>
                    </p>
                </div>
                </div><!-- /.entry-content -->
            </article></li>

 
            <li><article class="hentry">
                <header>
                        <abbr class="published" title="2017-02-18T07:55:00+00:00">Sat 18 February 2017</abbr>
                        <h1><a href="https://longwayaround.org.uk/notes/postgres-information-functions/" rel="bookmark" title="Permalink to Postgres Information Functions">Postgres Information Functions</a></h1>
                </header>
                <div class="entry-content">
                <div class="slug">
                    <p>Postgres contains a wealth of functions that provide information about a database and the objects within. The <a class="reference external" href="https://www.postgresql.org/docs/current/static/functions-info.html/">System Information Functions of the official documention</a> provides a full list. There are a huge number of functions covering a whole host of info from the current database session, privileges, function properties.</p>
<div class="section" id="examples">
<h2>Examples …</h2></div>
                    <p>
<a href="https://longwayaround.org.uk/notes/postgres-information-functions/#disqus_thread">comments</a>.                        <a class="readmore" href="https://longwayaround.org.uk/notes/postgres-information-functions/">read more</a>
                    </p>
                </div>
                </div><!-- /.entry-content -->
            </article></li>

 
            <li><article class="hentry">
                <header>
                        <abbr class="published" title="2016-04-26T14:00:00+01:00">Tue 26 April 2016</abbr>
                        <h1><a href="https://longwayaround.org.uk/notes/openlayers-2-custom-build/" rel="bookmark" title="Permalink to OpenLayers 2 Custom Build">OpenLayers 2 Custom Build</a></h1>
                </header>
                <div class="entry-content">
                <div class="slug">
                    <p>A bit of a blast from the past now that OpenLayers 3 has been released but it may be useful for someone who is working on or maintaining an OpenLayer 2 project.</p>
<p>Create a list of OpenLayers 2 classes used within a code base suitable for including in a <a class="reference external" href="http://docs.openlayers.org/library/deploying.html#custom-build-profiles">custom …</a></p>
                    <p>
<a href="https://longwayaround.org.uk/notes/openlayers-2-custom-build/#disqus_thread">comments</a>.                        <a class="readmore" href="https://longwayaround.org.uk/notes/openlayers-2-custom-build/">read more</a>
                    </p>
                </div>
                </div><!-- /.entry-content -->
            </article></li>

 
            <li><article class="hentry">
                <header>
                        <abbr class="published" title="2015-10-12T21:00:00+01:00">Mon 12 October 2015</abbr>
                        <h1><a href="https://longwayaround.org.uk/notes/testing-python-postgres/" rel="bookmark" title="Permalink to Testing Python &amp; Postgres">Testing Python &amp; Postgres</a></h1>
                </header>
                <div class="entry-content">
                <div class="slug">
                    <p>I recently pulled together <a class="reference external" href="https://github.com/walkermatt/python-postgres-testing-demo/">a project to demonstrate testing Python functions that interact with a Postgres database</a>. I find that this sort of thing crops up occasionally and the project is an attempt to distil the approach. The main points include:</p>
<ul class="simple">
<li>Creating a fresh temporary database via testing.postgresql prior …</li></ul>
                    <p>
<a href="https://longwayaround.org.uk/notes/testing-python-postgres/#disqus_thread">comments</a>.                        <a class="readmore" href="https://longwayaround.org.uk/notes/testing-python-postgres/">read more</a>
                    </p>
                </div>
                </div><!-- /.entry-content -->
            </article></li>

 
            <li><article class="hentry">
                <header>
                        <abbr class="published" title="2015-09-08T13:00:00+01:00">Tue 08 September 2015</abbr>
                        <h1><a href="https://longwayaround.org.uk/notes/read-only-postgres-database/" rel="bookmark" title="Permalink to Read-only Postgres database">Read-only Postgres database</a></h1>
                </header>
                <div class="entry-content">
                <div class="slug">
                    <p>There are times when I've needed to effectively make a Postgres database read-only, for example after loading or updating reference data. In the past I've revoked permissions from database roles to achieve this but as <a class="reference external" href="http://www.postgresql.org/message-id/5fe0d78bda51d7176940fb8e78739b54&#64;biglumber.com">this post on the PostgreSQL list states, it's possible to do so by making all …</a></p>
                    <p>
<a href="https://longwayaround.org.uk/notes/read-only-postgres-database/#disqus_thread">comments</a>.                        <a class="readmore" href="https://longwayaround.org.uk/notes/read-only-postgres-database/">read more</a>
                    </p>
                </div>
                </div><!-- /.entry-content -->
            </article></li>

 
            <li><article class="hentry">
                <header>
                        <abbr class="published" title="2014-11-20T00:00:00+00:00">Thu 20 November 2014</abbr>
                        <h1><a href="https://longwayaround.org.uk/notes/loading-postgis/" rel="bookmark" title="Permalink to Loading PostGIS">Loading PostGIS</a></h1>
                </header>
                <div class="entry-content">
                <div class="slug">
                    <p><em>Notes from a talk at PostGIS Day, London 20th Nov 2014.</em></p>
<div class="section" id="the-options">
<h2>The options</h2>
<p>All support basic options such as specifying table names, schema, SRS etc.</p>
<div class="section" id="graphical">
<h3>Graphical</h3>
<dl class="docutils">
<dt><a class="reference external" href="http://gothos.info/2014/03/loading-data-into-postgis-shapefiles/">shp2pgsql-gui</a></dt>
<dd>Graphical interface to shp2pgsql tool shipped with PostGIS to load ESRI Shapefiles via pgAdmin III.</dd>
<dt><a class="reference external" href="https://github.com/zer0infinity/OGR2GUI">ogr2gui</a></dt>
<dd>Graphical interface to <code>ogr2ogr</code> command line utility …</dd></dl></div></div>
                    <p>
<a href="https://longwayaround.org.uk/notes/loading-postgis/#disqus_thread">comments</a>.                        <a class="readmore" href="https://longwayaround.org.uk/notes/loading-postgis/">read more</a>
                    </p>
                </div>
                </div><!-- /.entry-content -->
            </article></li>

 
            <li><article class="hentry">
                <header>
                        <abbr class="published" title="2014-09-07T21:30:00+01:00">Sun 07 September 2014</abbr>
                        <h1><a href="https://longwayaround.org.uk/notes/practical-openlayers-3-leaflet/" rel="bookmark" title="Permalink to Practical OpenLayers 3 &amp; Leaflet">Practical OpenLayers 3 &amp; Leaflet</a></h1>
                </header>
                <div class="entry-content">
                <div class="slug">
                    <p>I ran a 2 hour workshop at <a class="reference external" href="http://www.nottingham.ac.uk/osgis/home.aspx">OSGIS 2014</a> introducing OpenLayers 3 and
Leaflet.</p>
<blockquote>
A hands on introduction to using OpenLayer 3 (OL3) and Leaflet to display
spatial data on the web. The workshop will introduce the two libraries, the
underpinning concepts and strengths of each, and take delegates through …</blockquote>
                    <p>
<a href="https://longwayaround.org.uk/notes/practical-openlayers-3-leaflet/#disqus_thread">comments</a>.                        <a class="readmore" href="https://longwayaround.org.uk/notes/practical-openlayers-3-leaflet/">read more</a>
                    </p>
                </div>
                </div><!-- /.entry-content -->
            </article></li>

 
            <li><article class="hentry">
                <header>
                        <abbr class="published" title="2014-07-17T19:45:00+01:00">Thu 17 July 2014</abbr>
                        <h1><a href="https://longwayaround.org.uk/notes/gnu-parallel-all-the-things/" rel="bookmark" title="Permalink to GNU Parallel all the things!">GNU Parallel all the things!</a></h1>
                </header>
                <div class="entry-content">
                <div class="slug">
                    <p>I've been doing a lot of data processing recently and have been looking for a way of running bulk data loads into PostGIS in parallel to make use of all available cores. The work has mainly revolved around loading national cover of Ordnance Survey OS MasterMap and VectorMap Local for …</p>
                    <p>
<a href="https://longwayaround.org.uk/notes/gnu-parallel-all-the-things/#disqus_thread">comments</a>.                        <a class="readmore" href="https://longwayaround.org.uk/notes/gnu-parallel-all-the-things/">read more</a>
                    </p>
                </div>
                </div><!-- /.entry-content -->
            </article></li>

 
            <li><article class="hentry">
                <header>
                        <abbr class="published" title="2014-02-18T19:42:00+00:00">Tue 18 February 2014</abbr>
                        <h1><a href="https://longwayaround.org.uk/notes/first-few-months-of-clojure/" rel="bookmark" title="Permalink to First few months of Clojure">First few months of Clojure</a></h1>
                </header>
                <div class="entry-content">
                <div class="slug">
                    <p>I've been learning a bit of Lisp on and off for a few years, I first read (about half of) <a class="reference external" href="http://landoflisp.com/">Land of Lisp</a>, then <a class="reference external" href="http://www.gigamonkeys.com/book/">Practical Lisp</a> then I came across <a class="reference external" href="http://clojure.org/">Clojure</a> a modern Lisp that runs on the JVM and since I've been reading <a class="reference external" href="http://www.clojurebook.com/">Clojure Programming</a> and working through <a class="reference external" href="https://github.com/walkermatt/clojure-koans">koans …</a></p>
                    <p>
<a href="https://longwayaround.org.uk/notes/first-few-months-of-clojure/#disqus_thread">comments</a>.                        <a class="readmore" href="https://longwayaround.org.uk/notes/first-few-months-of-clojure/">read more</a>
                    </p>
                </div>
                </div><!-- /.entry-content -->
            </article></li>

 
            <li><article class="hentry">
                <header>
                        <abbr class="published" title="2013-10-18T17:24:00+01:00">Fri 18 October 2013</abbr>
                        <h1><a href="https://longwayaround.org.uk/notes/custom-geoserver-getfeatureinfo-template/" rel="bookmark" title="Permalink to Custom GeoServer GetFeatureInfo Template">Custom GeoServer GetFeatureInfo Template</a></h1>
                </header>
                <div class="entry-content">
                <div class="slug">
                    <p>The default  <a class="reference external" href="http://geoserver.org/">GeoServer</a> GetFeatureInfo Freemarker template is a simple table and doesn't work very well when displaying the content in a web map popup. It's a common requirement to change the GetFeatureInfo template to an unordered list, to capitalise the title and attribute names. Here is a sample <cite>content.ftl …</cite></p>
                    <p>
<a href="https://longwayaround.org.uk/notes/custom-geoserver-getfeatureinfo-template/#disqus_thread">comments</a>.                        <a class="readmore" href="https://longwayaround.org.uk/notes/custom-geoserver-getfeatureinfo-template/">read more</a>
                    </p>
                </div>
                </div><!-- /.entry-content -->
            </article></li>

 
            <li><article class="hentry">
                <header>
                        <abbr class="published" title="2012-07-02T21:06:00+01:00">Mon 02 July 2012</abbr>
                        <h1><a href="https://longwayaround.org.uk/notes/using-leaflet-with-a-custom-projection-and-a-mapproxy-tms/" rel="bookmark" title="Permalink to Using Leaflet with a custom projection and a MapProxy TMS">Using Leaflet with a custom projection and a MapProxy TMS</a></h1>
                </header>
                <div class="entry-content">
                <div class="slug">
                    <p><strong>Update 2014-09-07</strong> I've just ran a workshop based on the Astun Leaflet &amp; and
ol3 examples at <a class="reference external" href="http://www.nottingham.ac.uk/osgis/home.aspx">OSGIS 2014</a>,
see <a class="reference external" href="/notes/practical-openlayers-3-leaflet/">Practical OpenLayers 3 &amp; Leaflet</a> for details.</p>
<p><strong>Update 2014-05-15</strong> For examples of displaying a Web Map Service (WMS) layer
in a custom projection (EPSG:27700) within Leaflet and OpenLayers 3 (ol3) see …</p>
                    <p>
<a href="https://longwayaround.org.uk/notes/using-leaflet-with-a-custom-projection-and-a-mapproxy-tms/#disqus_thread">comments</a>.                        <a class="readmore" href="https://longwayaround.org.uk/notes/using-leaflet-with-a-custom-projection-and-a-mapproxy-tms/">read more</a>
                    </p>
                </div>
                </div><!-- /.entry-content -->
            </article></li>

 
            <li><article class="hentry">
                <header>
                        <abbr class="published" title="2012-02-02T21:31:00+00:00">Thu 02 February 2012</abbr>
                        <h1><a href="https://longwayaround.org.uk/notes/greyscale-maps-with-mapserver/" rel="bookmark" title="Permalink to Greyscale maps with MapServer">Greyscale maps with MapServer</a></h1>
                </header>
                <div class="entry-content">
                <div class="slug">
                    <p>There have been a few times in the past (such as when I was preparing the base mapping for <a class="reference external" href="http://mywycombe.wycombe.gov.uk/?tab=2">My Wycombe</a>) when I've wanted to create greyscale base mapping using <a class="reference external" href="http://mapserver.org">MapServer</a>. Previously I've experimented with various processing options for raster images (with varying degrees of success), converting the source images …</p>
                    <p>
<a href="https://longwayaround.org.uk/notes/greyscale-maps-with-mapserver/#disqus_thread">comments</a>.                        <a class="readmore" href="https://longwayaround.org.uk/notes/greyscale-maps-with-mapserver/">read more</a>
                    </p>
                </div>
                </div><!-- /.entry-content -->
            </article></li>

 
            <li><article class="hentry">
                <header>
                        <abbr class="published" title="2011-11-24T21:39:00+00:00">Thu 24 November 2011</abbr>
                        <h1><a href="https://longwayaround.org.uk/notes/disaggregate-multilinestrings-using-st_dump-postgis/" rel="bookmark" title="Permalink to Disaggregate MultiLineStrings using ST_Dump PostGIS">Disaggregate MultiLineStrings using ST_Dump PostGIS</a></h1>
                </header>
                <div class="entry-content">
                <div class="slug">
                    <p>PostGIS the spatial extension to the PostgreSQL database provides a host of functions for querying, creating and manipulating geometries within the database. ST_Dump allows you to disaggregate collection and multi geometries such as MultiPolygon and MultiLineSting easily. The example below demonstrates starting with a table that contains one row with …</p>
                    <p>
<a href="https://longwayaround.org.uk/notes/disaggregate-multilinestrings-using-st_dump-postgis/#disqus_thread">comments</a>.                        <a class="readmore" href="https://longwayaround.org.uk/notes/disaggregate-multilinestrings-using-st_dump-postgis/">read more</a>
                    </p>
                </div>
                </div><!-- /.entry-content -->
            </article></li>

 
            <li><article class="hentry">
                <header>
                        <abbr class="published" title="2011-03-28T10:31:00+01:00">Mon 28 March 2011</abbr>
                        <h1><a href="https://longwayaround.org.uk/notes/recursively-delete-empty-directories/" rel="bookmark" title="Permalink to Recursively delete empty directories">Recursively delete empty directories</a></h1>
                </header>
                <div class="entry-content">
                <div class="slug">
                    <p>To recursively delete all empty directories from the command prompt in Windows. Open command prompt and change to the desired directory then enter the following:</p>
<div class="highlight"><pre><span></span><span class="k">for</span> /F <span class="s2">&quot;tokens=*&quot;</span> %f in <span class="o">(</span><span class="s1">&#39;dir /AD /S /B ^| sort /R&#39;</span><span class="o">)</span> <span class="k">do</span> <span class="nb">echo</span> rd <span class="s2">&quot;%f&quot;</span>
</pre></div>
<p>This command generates a list of all directories and sub …</p>
                    <p>
<a href="https://longwayaround.org.uk/notes/recursively-delete-empty-directories/#disqus_thread">comments</a>.                        <a class="readmore" href="https://longwayaround.org.uk/notes/recursively-delete-empty-directories/">read more</a>
                    </p>
                </div>
                </div><!-- /.entry-content -->
            </article></li>

 
            <li><article class="hentry">
                <header>
                        <abbr class="published" title="2011-01-07T17:53:00+00:00">Fri 07 January 2011</abbr>
                        <h1><a href="https://longwayaround.org.uk/notes/convert-a-directory-of-tiffs-to-greyscale-using-imagemagick/" rel="bookmark" title="Permalink to Convert a directory of TIFFs to greyscale using ImageMagick">Convert a directory of TIFFs to greyscale using ImageMagick</a></h1>
                </header>
                <div class="entry-content">
                <div class="slug">
                    <p>Change to the directory then run the command:</p>
<div class="highlight"><pre><span></span>mogrify -colorspace Gray *.tif
</pre></div>

                    <p>
<a href="https://longwayaround.org.uk/notes/convert-a-directory-of-tiffs-to-greyscale-using-imagemagick/#disqus_thread">comments</a>.                        <a class="readmore" href="https://longwayaround.org.uk/notes/convert-a-directory-of-tiffs-to-greyscale-using-imagemagick/">read more</a>
                    </p>
                </div>
                </div><!-- /.entry-content -->
            </article></li>

 
            <li><article class="hentry">
                <header>
                        <abbr class="published" title="2010-12-19T21:06:00+00:00">Sun 19 December 2010</abbr>
                        <h1><a href="https://longwayaround.org.uk/notes/build-ogr-18-with-gml-wfs-and-postgis-support-on-ubuntu-1004/" rel="bookmark" title="Permalink to Build OGR 1.8 with GML, WFS and PostGIS support on Ubuntu 10.04">Build OGR 1.8 with GML, WFS and PostGIS support on Ubuntu 10.04</a></h1>
                </header>
                <div class="entry-content">
                <div class="slug">
                    <p>OGR 1.8 introduces support for reading GML with feature attributes expressed as nested elements as found in Ordnance Survey's OS MasterMap as well as support for accessing WFS. This is a brief script for building OGR (GDAL) 1.8 from source as it's not currently released: Download latest daily …</p>
                    <p>
<a href="https://longwayaround.org.uk/notes/build-ogr-18-with-gml-wfs-and-postgis-support-on-ubuntu-1004/#disqus_thread">comments</a>.                        <a class="readmore" href="https://longwayaround.org.uk/notes/build-ogr-18-with-gml-wfs-and-postgis-support-on-ubuntu-1004/">read more</a>
                    </p>
                </div>
                </div><!-- /.entry-content -->
            </article></li>
    </ol><!-- /#posts-list -->
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                    Powered by <a href="http://alexis.notmyidea.org/pelican/">Pelican</a> and <a href="http://python.org">Python</a>, using a modified <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a> theme, background from <a href="http://subtlepatterns.com">Subtle Patterns</a> and icons from <a href="https://www.gosquared.com/blog/archives/2925">GoSocial</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'longwayaroundorguk';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>