<!DOCTYPE html>
<html lang="en">
<head>
        <title>longwayaround.org.uk - mapproxy</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, target-densitydpi=device-dpi">
        <link rel="stylesheet" href="../theme/css/main.css" type="text/css" />
        <link href="../feeds/all.rss.xml" type="application/atom+xml" rel="alternate" title="longwayaround.org.uk RSS Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie.css"/>
                <script src="../js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
<p><em>Warning using RELATIVE_URLS, disable RELATIVE_URLS &amp; re-build before uploading!</em></p>                 <h1><a href="/">longwayaround.org.uk  <strong>taking the scenic route and enjoying the journey</strong></a></h1>
                <nav>
                <ul>
                    <li ><a href="../notes/">notes</a></li>
                    <li><a href="../pages/about/">about</a></li>
                </ul>
                </nav>
                    <ul class="social">
                        <li><a href="../feeds/all.rss.xml" rel="alternate"><img src="../theme/images/icons/gosquared/18/rss.png" title="rss" width="18" height="18" /></a></li>
                    <li><a href="http://uk.linkedin.com/in/walkermatt"><img src="../theme/images/icons/gosquared/18/linkedin.png" title="linkedin" width="18" height="18" /></a></li>
                    <li><a href="http://delicious.com/walkermatt"><img src="../theme/images/icons/gosquared/18/delicious.png" title="delicious" width="18" height="18" /></a></li>
                    <li><a href="http://github.com/organizations/AstunTechnology"><img src="../theme/images/icons/gosquared/18/github.png" title="github" width="18" height="18" /></a></li>
                    <li><a href="http://github.com/walkermatt"><img src="../theme/images/icons/gosquared/18/github.png" title="github" width="18" height="18" /></a></li>
                    <li><a href="http://twitter.com/_walkermatt"><img src="../theme/images/icons/gosquared/18/twitter.png" title="twitter" width="18" height="18" /></a></li>
                    </ul>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <abbr class="published" title="2012-07-02T21:06:00+01:00">Mon 02 July 2012</abbr>
                    <h1 class="entry-title"><a href="../notes/using-leaflet-with-a-custom-projection-and-a-mapproxy-tms/">Using Leaflet with a custom projection and a MapProxy TMS</a></h1> 
                    <p><strong>Update 2014-09-07</strong> I've just ran a workshop based on the Astun Leaflet &amp; and
ol3 examples at <a class="reference external" href="http://www.nottingham.ac.uk/osgis/home.aspx">OSGIS 2014</a>,
see <a class="reference external" href="/notes/practical-openlayers-3-leaflet/">Practical OpenLayers 3 &amp; Leaflet</a> for details.</p>
<p><strong>Update 2014-05-15</strong> For examples of displaying a Web Map Service (WMS) layer
in a custom projection (EPSG:27700) within Leaflet and OpenLayers 3 (ol3) see:
<a class="reference external" href="https://github.com/AstunTechnology/astun-leaflet-examples">astun-leaflet-examples</a> and
<a class="reference external" href="https://github.com/AstunTechnology/astun-ol3-examples">astun-ol3-examples</a>.</p>
<p><strong>Update 2012-12-18</strong> I've update the <a class="reference external" href="https://gist.github.com/3034742">Gist</a>
to reflect changes in v0.4 of Leaflet, in particular the fact that the
scale function now belongs to the CRS object instead of the Map and the
way that the TileLayer scheme is specified has changed to simply <tt class="docutils literal">tms: true</tt>.</p>
<p><a class="reference external" href="http://leaflet.cloudmade.com/">Leaflet</a> is a lightweight JavaScript
slippy map client well suited to use on mobile devices. It’s seen as an
alternative to <a class="reference external" href="http://openlayers.org/">OpenLayers</a> but takes a
different approach focusing on a small easy to use set of features.</p>
<p>By default Leaflet allow you to display a map in one of the common
projections used to display tiles in the Google and
<a class="reference external" href="http://www.openstreetmap.org/">OSM</a> tile schemes and the vast
majority of examples you see use these. It is however possible to use
another projection such as a local projection like British National Grid
thanks to <a class="reference external" href="https://github.com/kartena/Proj4Leaflet">Proj4Leaflet</a>
which allows you to provide a <a class="reference external" href="http://trac.osgeo.org/proj/">Proj4</a>
projection definition and Transformation and scale functions which map
projected coordinates to grid coordinates at a given zoom.</p>
<p>Setting up the definition is straight forward thanks to
<a class="reference external" href="http://spatialreference.org">spatialreference.org</a> which allows you
to look-up most projections and their definitions. In my case the
Transformation and scale functions also turned out to be simple after a
little trial and error.</p>
<p>I’ve been using a TMS layer provided by one of the MapProxy instances
that form part of Astun Data Services, the configuration of which was as
simple as providing a URL template and setting the <tt class="docutils literal">TileLayer</tt> scheme
to <tt class="docutils literal">tms</tt>.</p>
<p>I’ve posted an example JavaScript snippet as a GitHub Gist with some
notes here:
<a class="reference external" href="https://gist.github.com/3034742">https://gist.github.com/3034742</a></p>

<footer class="post-info">
    <abbr class="published" title="2012-07-02T21:06:00+01:00">Mon 02 July 2012</abbr>
<p>Tags: <a href="../tag/leaflet.html">leaflet</a> <a href="../tag/mapproxy.html">mapproxy</a> </p></footer><!-- /.post-info -->                    <p><a href="../notes/using-leaflet-with-a-custom-projection-and-a-mapproxy-tms/#disqus_thread">comments</a>.</p>
                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                    Powered by <a href="http://alexis.notmyidea.org/pelican/">Pelican</a> and <a href="http://python.org">Python</a>, using a modified <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a> theme, background from <a href="http://subtlepatterns.com">Subtle Patterns</a> and icons from <a href="https://www.gosquared.com/blog/archives/2925">GoSocial</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'longwayaroundorguk';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>