<!DOCTYPE html>
<html lang="en">
<head>
        <title>longwayaround.org.uk - openlayer2</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, target-densitydpi=device-dpi">
        <link rel="stylesheet" href="https://longwayaround.org.uk/theme/css/main.css" type="text/css" />
        <link href="https://longwayaround.org.uk/feeds/all.rss.xml" type="application/atom+xml" rel="alternate" title="longwayaround.org.uk RSS Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://longwayaround.org.uk/css/ie.css"/>
                <script src="https://longwayaround.org.uk/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://longwayaround.org.uk/css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">longwayaround.org.uk  <strong>taking the scenic route and enjoying the journey</strong></a></h1>
                <nav>
                <ul>
                    <li ><a href="https://longwayaround.org.uk/notes/">notes</a></li>
                </ul>
                </nav>
                    <ul class="social">
                        <li><a href="https://longwayaround.org.uk/feeds/all.rss.xml" rel="alternate"><img src="https://longwayaround.org.uk/theme/images/icons/gosquared/18/rss.png" title="rss" width="18" height="18" /></a></li>
                    <li><a href="https://uk.linkedin.com/in/walkermatt"><img src="https://longwayaround.org.uk/theme/images/icons/gosquared/18/linkedin.png" title="linkedin" width="18" height="18" /></a></li>
                    <li><a href="https://github.com/organizations/AstunTechnology"><img src="https://longwayaround.org.uk/theme/images/icons/gosquared/18/github.png" title="github" width="18" height="18" /></a></li>
                    <li><a href="https://github.com/walkermatt"><img src="https://longwayaround.org.uk/theme/images/icons/gosquared/18/github.png" title="github" width="18" height="18" /></a></li>
                    <li><a href="https://twitter.com/_walkermatt"><img src="https://longwayaround.org.uk/theme/images/icons/gosquared/18/twitter.png" title="twitter" width="18" height="18" /></a></li>
                    </ul>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <abbr class="published" title="2016-04-26T14:00:00+01:00">Tue 26 April 2016</abbr>
                    <h1 class="entry-title"><a href="https://longwayaround.org.uk/notes/openlayers-2-custom-build/">OpenLayers 2 Custom Build</a></h1> 
                    <p>A bit of a blast from the past now that OpenLayers 3 has been released but it may be useful for someone who is working on or maintaining an OpenLayer 2 project.</p>
<p>Create a list of OpenLayers 2 classes used within a code base suitable for including in a <a class="reference external" href="http://docs.openlayers.org/library/deploying.html#custom-build-profiles">custom build profile</a>.</p>
<div class="highlight"><pre><span></span><span class="nb">cd</span> /path/to/your/js/
grep --ignore-case --recursive --no-filename --only-matching <span class="s1">&#39;new OpenLayers\.[a-z0-9\.]*&#39;</span> <span class="p">|</span> <span class="se">\</span>
sed -e <span class="s1">&#39;s/new //&#39;</span> -e <span class="s1">&#39;s/\./\//g&#39;</span> -e <span class="s1">&#39;s/$/\.js/&#39;</span> <span class="p">|</span> <span class="se">\</span>
sort <span class="p">|</span> <span class="se">\</span>
uniq
</pre></div>
<div class="section" id="explanation">
<h2>Explanation</h2>
<ul class="simple">
<li>Find instances of <code>new OpenLayers.FOO</code> in all source files below the current directory using <code>grep</code></li>
<li>Remove <code>&quot;new &quot;</code> from each matching line, replace the dots which separate the parts of the class name with forward slashes and add <code>.js</code> to the end to complete the path all using <code>sed</code> (each <code>-e</code> applies an expression to each line)</li>
<li>Sort the list with <code>sort</code></li>
<li>Remove duplicates with <code>uniq</code></li>
</ul>
</div>
<div class="section" id="caveats">
<h2>Caveats</h2>
<div class="section" id="vector-renderers">
<h3>Vector Renderers</h3>
<p>If you find <code>OpenLayers/Layer/Vector.js</code> in the list then the vector rendering classes will need to be included manually:</p>
<div class="highlight"><pre><span></span><span class="na">OpenLayers/Renderer/Canvas.js</span>
<span class="na">OpenLayers/Renderer/SVG.js</span>
<span class="na">OpenLayers/Renderer/VML.js</span>
</pre></div>
</div>
<div class="section" id="utility-classes">
<h3>Utility Classes</h3>
<p>If you are using classes such as <code>OpenLayers.Pixel</code>, <code>OpenLayers.LonLat</code>. You will find that when using the build script you get an error as the source files can not be found as the class names do not match the location in the OpenLayers source. In most cases for these base classes you can simply remove them from the build config file as they will be automatically included as they are referenced by the other classes such as <code>OpenLayers.Map</code>.</p>
</div>
</div>

<footer class="post-info">
    <abbr class="published" title="2016-04-26T14:00:00+01:00">Tue 26 April 2016</abbr>
<p>Tags: <a href="https://longwayaround.org.uk/tag/openlayer2.html">openlayer2</a> <a href="https://longwayaround.org.uk/tag/notes.html">notes</a> </p></footer><!-- /.post-info -->                    <p><a href="https://longwayaround.org.uk/notes/openlayers-2-custom-build/#disqus_thread">comments</a>.</p>
                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                    Powered by <a href="http://alexis.notmyidea.org/pelican/">Pelican</a> and <a href="http://python.org">Python</a>, using a modified <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a> theme, background from <a href="http://subtlepatterns.com">Subtle Patterns</a> and icons from <a href="https://www.gosquared.com/blog/archives/2925">GoSocial</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'longwayaroundorguk';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>