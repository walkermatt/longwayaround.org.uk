<!DOCTYPE html>
<html lang="en">
<head>
        <title>Using Leaflet with a custom projection and a MapProxy TMS</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, target-densitydpi=device-dpi">
        <link rel="stylesheet" href="../.././theme/css/main.css" type="text/css" />
        <link href="../.././" type="application/atom+xml" rel="alternate" title="longwayaround.org.uk ATOM Feed" />
        
        <link href="../.././feeds/all.rss.xml" type="application/atom+xml" rel="alternate" title="longwayaround.org.uk RSS Feed" />
        

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../.././css/ie.css"/>
                <script src="../.././js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../.././css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">

        <header id="banner" class="body">
                <h1><a href="../../.">longwayaround.org.uk  <strong>taking the scenic route and enjoying the journey</strong></a></h1>
                <nav>
                <ul>
                
                
                    <li class="active"><a href="../.././notes/">notes</a></li>
                
                
                
                    <li><a href="../.././pages/about/">about</a></li>
                
                
                </ul>
                </nav>
                
                    <ul class="social">
                        <li><a href="../.././" rel="alternate"><img src="../.././theme/images/icons/gosquared/18/rss.png" title="atom" width="18" height="18" /></a></li>
                        
                        <li><a href="../.././feeds/all.rss.xml" rel="alternate"><img src="../.././theme/images/icons/gosquared/18/rss.png" title="rss" width="18" height="18" /></a></li>
                        
                    
                    <li><a href="http://uk.linkedin.com/in/walkermatt"><img src="../.././theme/images/icons/gosquared/18/linkedin.png" title="linkedin" width="18" height="18" /></a></li>
                    
                    <li><a href="http://delicious.com/walkermatt"><img src="../.././theme/images/icons/gosquared/18/delicious.png" title="delicious" width="18" height="18" /></a></li>
                    
                    <li><a href="http://github.com/organizations/AstunTechnology"><img src="../.././theme/images/icons/gosquared/18/github.png" title="github" width="18" height="18" /></a></li>
                    
                    <li><a href="http://github.com/walkermatt"><img src="../.././theme/images/icons/gosquared/18/github.png" title="github" width="18" height="18" /></a></li>
                    
                    <li><a href="http://twitter.com/_walkermatt"><img src="../.././theme/images/icons/gosquared/18/twitter.png" title="twitter" width="18" height="18" /></a></li>
                    
                    </ul>
                
        </header><!-- /#banner -->
                
<section id="content" class="body">    
<article>
        <header> <h1 class="entry-title"><a href=""
        rel="bookmark" title="Permalink to Using Leaflet with a custom projection and a MapProxy TMS">Using Leaflet with a custom projection and a MapProxy TMS</a></h1>  </header>
        <div class="entry-content">
        <footer class="post-info">
        <abbr class="published" title="2012-07-02T21:06:00">
                Mon 02 July 2012
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href="../.././author/walkermatt.html">walkermatt</a>
        </address>
        
<p>In <a href="../.././category/notes.html">notes</a>. </p>
<p>tags: <a href="../.././tag/leaflet.html">leaflet</a> <a href="../.././tag/mapproxy.html">mapproxy</a> </p>


</footer><!-- /.post-info -->
        <p><strong>Update 2012-12-18</strong> I've update the <a class="reference external" href="https://gist.github.com/3034742">Gist</a>
to reflect changes in v0.4 of Leaflet, in particular the fact that the
scale function now belongs to the CRS object instead of the Map and the
way that the TileLayer scheme is specified has changed to simply <tt class="docutils literal">tms: true</tt>.</p>
<p><a class="reference external" href="http://leaflet.cloudmade.com/">Leaflet</a> is a lightweight JavaScript
slippy map client well suited to use on mobile devices. It’s seen as an
alternative to <a class="reference external" href="http://openlayers.org/">OpenLayers</a> but takes a
different approach focusing on a small easy to use set of features.</p>
<p>By default Leaflet allow you to display a map in one of the common
projections used to display tiles in the Google and
<a class="reference external" href="http://www.openstreetmap.org/">OSM</a> tile schemes and the vast
majority of examples you see use these. It is however possible to use
another projection such as a local projection like British National Grid
thanks to <a class="reference external" href="https://github.com/kartena/Proj4Leaflet">Proj4Leaflet</a>
which allows you to provide a <a class="reference external" href="http://trac.osgeo.org/proj/">Proj4</a>
projection definition and Transformation and scale functions which map
projected coordinates to grid coordinates at a given zoom.</p>
<p>Setting up the definition is straight forward thanks to
<a class="reference external" href="http://spatialreference.org">spatialreference.org</a> which allows you
to look-up most projections and their definitions. In my case the
Transformation and scale functions also turned out to be simple after a
little trial and error.</p>
<p>I’ve been using a TMS layer provided by one of the MapProxy instances
that form part of Astun Data Services, the configuration of which was as
simple as providing a URL template and setting the <tt class="docutils literal">TileLayer</tt> scheme
to <tt class="docutils literal">tms</tt>.</p>
<p>I’ve posted an example JavaScript snippet as a GitHub Gist with some
notes here:
<a class="reference external" href="https://gist.github.com/3034742">https://gist.github.com/3034742</a></p>

        </div><!-- /.entry-content -->
        
        <div class="comments">
        <!-- <h2>Comments !</h2> -->
            <div id="disqus_thread"></div>
            <script type="text/javascript">
               // Don't set the identifier so that comments are
               // associated with the url
               // var disqus_identifier = "notes/using-leaflet-with-a-custom-projection-and-a-mapproxy-tms/";
               (function() {
               var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
               dsq.src = 'http://longwayaroundorguk.disqus.com/embed.js';
               (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
              })();
            </script>
        </div>
        

</article>
</section>
<section id="content" class="body">
<h1>Articles</h1>
<ul>

    <li><a href='../../notes/using-leaflet-with-a-custom-projection-and-a-mapproxy-tms/'>Using Leaflet with a custom projection and a MapProxy TMS</a></li>

    <li><a href='../../notes/greyscale-maps-with-mapserver/'>Greyscale maps with MapServer</a></li>

    <li><a href='../../notes/disaggregate-multilinestrings-using-st_dump-postgis/'>Disaggregate MultiLineStrings using ST_Dump PostGIS</a></li>

    <li><a href='../../notes/recursively-delete-empty-directories/'>Recursively delete empty directories</a></li>

    <li><a href='../../notes/convert-a-directory-of-tiffs-to-greyscale-using-imagemagick/'>Convert a directory of TIFFs to greyscale using ImageMagick</a></li>

    <li><a href='../../notes/build-ogr-18-with-gml-wfs-and-postgis-support-on-ubuntu-1004/'>Build OGR 1.8 with GML, WFS and PostGIS support on Ubuntu 10.04</a></li>

</ul>
</section>

        <section id="extras" class="body">
        
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                    <h3>Credits</h3>
                    Powered by <a href="http://alexis.notmyidea.org/pelican/">Pelican</a> and <a href="http://python.org">Python</a>, using a modified <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a> theme, background from <a href="http://subtlepatterns.com">Subtle Patterns</a> and icons from <a href="https://www.gosquared.com/blog/archives/2925">GoSocial</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->




<script type="text/javascript">
    var disqus_shortname = 'longwayaroundorguk';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

</body>
</html>